<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>아르카나 OCR</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <h1>아르카나 OCR <span class="version">v2.6</span></h1>
    <p class="subtitle">성배 스크린샷에서 스킬/레벨 정보를 자동 추출합니다</p>
  </header>

  <main>
    <div id="main-layout">
    <div id="main-content">
    <!-- Upload Zone -->
    <section id="upload-section">
      <div id="upload-zone">
        <div class="upload-icon">+</div>
        <p>이미지를 드래그하거나 클릭하여 업로드</p>
        <p class="upload-hint">여러 이미지를 한 번에 업로드할 수 있습니다</p>
        <input type="file" id="file-input" multiple accept="image/*" hidden>
      </div>
    </section>

    <!-- Thumbnail Strip -->
    <section id="thumbnail-section" class="hidden">
      <div id="thumbnail-strip"></div>
    </section>

    <!-- Image Workspace (크롭된 미리보기) -->
    <section id="workspace-section" class="hidden">
      <div id="workspace-container">
        <div id="workspace">
          <img id="workspace-image" alt="Selected image">
        </div>
        <div id="crop-controls">
          <label class="crop-label">오른쪽 크롭</label>
          <div class="crop-slider-row">
            <input type="range" id="crop-ratio" min="15" max="60" value="33" class="crop-slider">
            <span id="crop-ratio-value">33%</span>
          </div>
          <label class="crop-label">아래쪽 크롭</label>
          <div class="crop-slider-row">
            <input type="range" id="crop-bottom" min="0" max="50" value="0" class="crop-slider">
            <span id="crop-bottom-value">0%</span>
          </div>
        </div>
      </div>
    </section>

    <!-- OCR Controls -->
    <section id="ocr-section" class="hidden">
      <div id="ocr-controls">
        <button id="btn-run-ocr" class="btn btn-primary btn-large">전체 이미지 OCR 실행</button>
        <select id="class-select" class="class-select">
          <option value="">직업 미선택 (선택 시 정확도 향상)</option>
        </select>
        <div id="progress-container" class="hidden">
          <div id="progress-bar">
            <div id="progress-fill"></div>
          </div>
          <p id="progress-text">준비 중...</p>
        </div>
      </div>
    </section>

    <!-- Results Table -->
    <section id="results-section" class="hidden">
      <div id="results-header">
        <h2>추출 결과</h2>
        <div id="export-buttons">
          <button id="btn-export-csv" class="btn btn-small">CSV</button>
          <button id="btn-export-excel" class="btn btn-small">Excel</button>
          <button id="btn-export-json" class="btn btn-small">JSON</button>
          <button id="btn-clear-results" class="btn btn-small btn-danger">결과 초기화</button>
        </div>
      </div>
      <div id="table-container">
        <table id="results-table">
          <thead></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
    </div><!-- /main-content -->

    <!-- 오른쪽 사이드 가이드 -->
    <aside id="guide-sidebar">
      <div class="guide-box">
        <p class="guide-title">사용법</p>
        <ol class="guide-steps">
          <li>스크린샷 이미지 업로드</li>
          <li>크롭 비율로 오른쪽 영역 조절</li>
          <li><strong>OCR 실행</strong> 클릭</li>
        </ol>
        <p class="guide-title" style="margin-top:8px">팁</p>
        <ul class="guide-steps">
          <li>직업 선택 시 정확도 향상</li>
          <li>크롭 미리보기에서 스킬 영역이 보이도록 비율 조절</li>
        </ul>
      </div>
    </aside>
    </div><!-- /main-layout -->
  </main>


  <!-- CDN Dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <script src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>

  <!-- App Modules -->
  <script src="js/skill-data.js"></script>
  <script src="js/image-manager.js"></script>

  <script src="js/ocr-engine.js"></script>
  <script src="js/result-table.js"></script>
  <script src="js/export-manager.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
