<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Screenshot OCR</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <h1>Game Screenshot OCR</h1>
    <p class="subtitle">게임 스크린샷에서 아이템/장비 정보를 추출합니다</p>
  </header>

  <main>
    <!-- Upload Zone -->
    <section id="upload-section">
      <div id="upload-zone">
        <div class="upload-icon">+</div>
        <p>이미지를 드래그하거나 클릭하여 업로드</p>
        <p class="upload-hint">여러 이미지를 한 번에 업로드할 수 있습니다</p>
        <input type="file" id="file-input" multiple accept="image/*" hidden>
      </div>
    </section>

    <!-- Thumbnail Strip -->
    <section id="thumbnail-section" class="hidden">
      <div id="thumbnail-strip"></div>
    </section>

    <!-- Image Workspace -->
    <section id="workspace-section" class="hidden">
      <div id="workspace-container">
        <div id="workspace">
          <img id="workspace-image" alt="Selected image">
          <canvas id="region-canvas"></canvas>
        </div>
        <div id="region-controls">
          <button id="btn-draw-mode" class="btn btn-primary">영역 그리기</button>
          <button id="btn-clear-regions" class="btn btn-secondary">전체 삭제</button>
          <div id="region-list"></div>
          <div id="template-controls">
            <h3>템플릿</h3>
            <div class="template-actions">
              <select id="template-select">
                <option value="">-- 템플릿 선택 --</option>
              </select>
              <button id="btn-load-template" class="btn btn-small">불러오기</button>
              <button id="btn-save-template" class="btn btn-small">저장</button>
              <button id="btn-delete-template" class="btn btn-small btn-danger">삭제</button>
            </div>
            <div class="template-io">
              <button id="btn-export-template" class="btn btn-small">템플릿 내보내기</button>
              <button id="btn-import-template" class="btn btn-small">템플릿 가져오기</button>
              <input type="file" id="template-file-input" accept=".json" hidden>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- OCR Controls -->
    <section id="ocr-section" class="hidden">
      <div id="ocr-controls">
        <button id="btn-run-ocr" class="btn btn-primary btn-large">OCR 실행</button>
        <button id="btn-run-ocr-all" class="btn btn-secondary btn-large">전체 이미지 OCR</button>
        <div id="progress-container" class="hidden">
          <div id="progress-bar">
            <div id="progress-fill"></div>
          </div>
          <p id="progress-text">준비 중...</p>
        </div>
      </div>
    </section>

    <!-- Results Table -->
    <section id="results-section" class="hidden">
      <div id="results-header">
        <h2>추출 결과</h2>
        <div id="export-buttons">
          <button id="btn-export-csv" class="btn btn-small">CSV</button>
          <button id="btn-export-excel" class="btn btn-small">Excel</button>
          <button id="btn-export-json" class="btn btn-small">JSON</button>
          <button id="btn-clear-results" class="btn btn-small btn-danger">결과 초기화</button>
        </div>
      </div>
      <div id="table-container">
        <table id="results-table">
          <thead></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <footer>
    <p>Tesseract.js 기반 클라이언트 사이드 OCR | 서버에 이미지가 전송되지 않습니다</p>
  </footer>

  <!-- CDN Dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <script src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>

  <!-- App Modules -->
  <script src="js/image-manager.js"></script>
  <script src="js/region-selector.js"></script>
  <script src="js/ocr-engine.js"></script>
  <script src="js/result-table.js"></script>
  <script src="js/export-manager.js"></script>
  <script src="js/template-manager.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
