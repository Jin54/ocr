<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>아르카나 OCR</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <h1>아르카나 OCR <span class="version">v1.7</span></h1>
    <p class="subtitle">성배 스크린샷에서 스킬/레벨 정보를 자동 추출합니다</p>
  </header>

  <main>
    <div id="main-layout">
    <div id="main-content">
    <!-- Upload Zone -->
    <section id="upload-section">
      <div id="upload-zone">
        <div class="upload-icon">+</div>
        <p>이미지를 드래그하거나 클릭하여 업로드</p>
        <p class="upload-hint">여러 이미지를 한 번에 업로드할 수 있습니다</p>
        <input type="file" id="file-input" multiple accept="image/*" hidden>
      </div>
    </section>

    <!-- Thumbnail Strip -->
    <section id="thumbnail-section" class="hidden">
      <div id="thumbnail-strip"></div>
    </section>

    <!-- Image Workspace (대표 이미지에서 영역 지정) -->
    <section id="workspace-section" class="hidden">
      <div id="workspace-container">
        <div id="workspace">
          <img id="workspace-image" alt="Selected image">
          <canvas id="region-canvas"></canvas>
        </div>
        <div id="region-controls">
          <button id="btn-draw-type" class="btn btn-region-type">종류 영역</button>
          <button id="btn-draw-skill" class="btn btn-region-skill">스킬 영역</button>
          <button id="btn-clear-regions" class="btn btn-secondary">전체 삭제</button>
        </div>
      </div>
    </section>

    <!-- OCR Controls -->
    <section id="ocr-section" class="hidden">
      <div id="ocr-controls">
        <button id="btn-run-ocr" class="btn btn-primary btn-large">전체 이미지 OCR 실행</button>
        <select id="class-select" class="class-select">
          <option value="">직업 미선택 (선택 시 정확도 향상)</option>
        </select>
        <div id="progress-container" class="hidden">
          <div id="progress-bar">
            <div id="progress-fill"></div>
          </div>
          <p id="progress-text">준비 중...</p>
        </div>
      </div>
    </section>

    <!-- Results Table -->
    <section id="results-section" class="hidden">
      <div id="results-header">
        <h2>추출 결과</h2>
        <div id="export-buttons">
          <button id="btn-export-csv" class="btn btn-small">CSV</button>
          <button id="btn-export-excel" class="btn btn-small">Excel</button>
          <button id="btn-export-json" class="btn btn-small">JSON</button>
          <button id="btn-clear-results" class="btn btn-small btn-danger">결과 초기화</button>
        </div>
      </div>
      <div id="table-container">
        <table id="results-table">
          <thead></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
    </div><!-- /main-content -->

    <!-- 오른쪽 사이드 가이드 -->
    <aside id="guide-sidebar">
      <div class="guide-box">
        <p class="guide-title">사용법</p>
        <ol class="guide-steps">
          <li><span class="color-type">종류 영역</span>: "A의 B" 이름 부분</li>
          <li><span class="color-skill">스킬 영역</span>: 스킬 목록 부분</li>
          <li>각 영역을 드래그하여 지정</li>
          <li><strong>OCR 실행</strong> 클릭</li>
        </ol>
        <p class="guide-title" style="margin-top:8px">팁</p>
        <ul class="guide-steps">
          <li>아이콘을 제외하고 텍스트만 선택</li>
          <li>직업 선택 시 정확도 향상</li>
        </ul>
      </div>
    </aside>
    </div><!-- /main-layout -->
  </main>


  <!-- CDN Dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <script src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>

  <!-- App Modules -->
  <script src="js/skill-data.js"></script>
  <script src="js/image-manager.js"></script>
  <script src="js/region-selector.js"></script>
  <script src="js/ocr-engine.js"></script>
  <script src="js/result-table.js"></script>
  <script src="js/export-manager.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
